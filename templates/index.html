{% extends "base.html" %}

{% block title %}
    Home Page
{% endblock %}

{% block bodyid %}index{% endblock %}

{% block content %}
    <h2>Welcome {{ user.screen_name }} ({{ user.id }})</h2>
    {% if user.import_finished %}
        <p>We've finished importing your tweets.  You've got {{ user.tweet_count }} of them.</p>
    {% else %}
        <p>We have not yet finished importing your tweets.  Here's what we've got so far:</p>
    {% endif %}
    
    <section id="latest-tweets" class="tweet list">
        <h3>Latest Tweets</h3>
        <ul>
            {% for tweet in tweets %}
                <li>{% include "_tweet.html" %}</li>
            {% endfor %}
        </ul>
    </section>

    <section id="date-archives" class="archives list">
        <h3>Dates</h3>
        <table cellspacing="0">
            {% for year, months in date_archives %}
                {% for month in months %}
                    <tr>
                        {% if months.index(month) == 0 %}
                            <td rowspan="{{ months|length }}" valign="top">{{ year }}</td>
                        {% endif %}
                        <td>{{ month }}</td>
                        <td>{{ month.tweets|length }}</td>
                    </tr>
                {% endfor %}
            {% endfor %}
        </table>
    </section>

    <section id="mention-archives" class="archives list">
        <h3>Mentions</h3>
        <table cellspacing="0">
            {% for mention in mention_archives %}
                <tr>
                    <td>{{ mention }}</td>
                    <td>{{ mention.tweets|length }}</td>
                </tr>
            {% endfor %}
        </table>
    </section>

    <section id="places" class="archives list">
        <h3>Places</h3>
        <table cellspacing="0">
            {% for place in places %}
                <tr>
                    <td>{{ place }}</td>
                    <td>{{ place.tweet_count }}</td>
                </tr>
            {% endfor %}
        </table>
    </section>

    <section id="sources" class="archives list">
        <h3>Sources</h3>
        <table cellspacing="0">
            {% for source in sources %}
                <tr>
                    <td>{{ source }}</td>
                    <td>{{ source.tweet_count }}</td>
                </tr>
            {% endfor %}
        </table>
    </section>
{% endblock %}